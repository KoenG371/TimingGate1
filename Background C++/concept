#include <wiringPi.h>
#include <chrono>
#include <iostream>

#Define PIN_START 17
#Define PIN_STOP 18

int main (int argc, char **argv)
{
    wiringPiSetupGpio();
    pinMode(PIN_START, OUTPUT);
    pinMode(PIN_STOP, INPUT);
    printf("LED and button pins have beens setup.\n");
    
    while (1)
    {   
        if (digitalRead(PIN_START) == HIGH) {
            digitalWrite(PIN_LED, HIGH);
        }
        else {
            digitalWrite(PIN_LED, LOW);
        }
        
        std::this_thread::sleep_for(std::chrono::milliseconds(10));
    }
}


template <typename Clock = std::chrono::steady_clock>
class stopwatch
{
    typename Clock::time_point last_;

public:
    stopwatch()
        : last_(Clock::now())
    {}

    void reset()
    {
        *this = stopwatch();
    }

    typename Clock::duration elapsed() const
    {
        return Clock::now() - last_;
    }

    typename Clock::duration tick()
    {
        auto now = Clock::now();
        auto elapsed = now - last_;
        last_ = now;
        return elapsed;
    }
};

template <typename T, typename Rep, typename Period>
T duration_cast(const std::chrono::duration<Rep, Period>& duration)
{
    return duration.count() * static_cast<T>(Period::num) / static_cast<T>(Period::den);
}

int main()
{
    stopwatch<> sw;
    // ...
    std::cout << "Elapsed: " << duration_cast<double>(sw.elapsed()) << '\n';
}
